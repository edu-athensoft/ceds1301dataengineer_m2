安装Zookeeper
docker pull wurstmeister/zookeeper

运行Zookeeper
docker run -d --name zookeeper -p 2181:2181 wurstmeister/zookeeper

安装Kafka
docker pull wurstmeister/kafka

运行Kafka
docker run -d --name kafka -p 9092:9092 --link zookeeper:zookeeper --env KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 --env KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092 --env KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 --env KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1 wurstmeister/kafka

进入Kafka容器
docker exec -it kafka /bin/bash

创建Kafka测试主题
kafka-topics.sh --create --topic test_topic --partitions 1 --replication-factor 1 --zookeeper zookeeper:2181

执行生产者命令
kafka-console-producer.sh --broker-list localhost:9092 --topic test_topic

执行消费者命令
docker exec -it kafka /bin/bash
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test_topic --from-beginning
